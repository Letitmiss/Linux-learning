### [目录](https://github.com/Letitmiss/Linux-learning/blob/master/README.md)
### [上一节 第7章 Linux档案与文件系统管理](https://github.com/Letitmiss/Linux-learning/blob/master/blog/7.1filedir.md)
-----
## 认识EXT2文件系统
[1. 磁盘组成与分割](#磁盘组成与分割)  <br/>
[2. 文件系统特性](#文件系统特性)   <br/>
[3. Linux的我ext2文件系统inode](#EXT2文件系统inode)   <br/>
[4. 文件系统与目录树的关系](#文件系统特性)   <br/>
[5. EXT2/EXT3的档案存取与日志式文件系统 ](#文件系统特性)   <br/>
[6. Linux文件系统的运作](#文件系统特性)   <br/>
[7. 挂载点的意义](#文件系统特性)   <br/>
[8. 其他linux支持的文件系统与VFS](#文件系统特性)   <br/>

----

## 磁盘组成与分割
### 磁盘组成
* 磁盘是由圆形的磁盘盘,机械手臂,机械手臂上都磁盘读取头,主轴马达组成
* 磁盘的物理组成
* ![此处有图]()
1. 扇区(Sector)为最小的物理存储单位,每个扇区为512bytes
2. 将扇区组成一个圆,就是磁柱(Cylinder),磁柱是分割槽的最小单位;
3. 第一个扇区最重要,记录了主引导分区(Master boot record,MRB),安装引导加载程序及分割表(partition),记录磁盘分区状态,MRB占有446bytes而partition则占有64bytes.
### 分区
* 所谓磁盘分区是指告诉操作系统在此分割槽可以存取的区域是有A磁柱到B磁柱之间的区块,在这个区块内进行读写搜寻操作,磁盘分区就指定分割槽的起始与结束磁柱就是.
* 指定分割槽的磁柱范围的信息记录在分割表中,分割表只有64bytes,最多只能记录四笔分割槽的记录,这四笔分割槽成为主要(Primary)或延伸(extended)分割槽,其中延伸分割槽还可以再分割出逻辑分割槽,而能被格式的则仅有主要分割槽与逻辑分割槽
1. 主要分割与延伸分割最多可以有四笔(硬盘的额限制)
2. 延伸分割最多只能有一个(操作系统限制)
3. 逻辑分割是由延伸分割持续切割出来的分割槽;
4. 能够被格式化后,作为数据存储的分割槽为主要分割与逻辑分割,延伸分割无法格式化
5. 逻辑分割的数量已操作系统而不同,在Linux系统中,IDE硬盘最多有59个逻辑分割(5-63),STAT硬盘则有11个逻辑分割(5-11)

## 文件系统特性
### 格式化
* 磁盘分区完毕后需要格式化,之后操作系统才可以使用这个分割槽,因为每种操作系统格式化设定的文件属性与权限并不相同,所以需要格式化为操作系统能够利用的文件系统filesystem
* 传统的分割槽只能被格式化一个文件系统,所以说一个filesystem就是一个partition,随着技术的进步,LVM可将一个分割槽格式化多个文件系统,软件磁盘阵列可以将多个分割槽合并为一个文件系统,所以目前格式化不再针对partition来格式化,通常称呼一个可被挂载的数据为一个文件系统而不是一个分割槽;

### 文件系统的inode与block
* 操作系统的档案数据除了档案的实际数据外,通常还有很多属性,例如linux操作系统的档案权限rwx与文件属性,文件系统通常会将两部分数据分别存放在不用的区块,属性与权限放到inode中,实际数据存放到data block中,另外还有一个超级区块(superblock)会记录整个文件系统的整体信息,包括inode与block的总量,使用量,剩余量.
* 每个inode与block都有编号,至于三个数据的意义:
1. superblock : 记录此filesystem的整体信息,包括inode/blockde总量,使用量,剩余量,以及与文件系统的格式与相关信息
2. inode : 记录档案的属性,一个档案占用一个inode,同时记录此档案所在的block号码
3. block : 实际记录档案的内容,若档案太大时,会占用多个block.

![inode与 block区块图解说明]

* 通过indoe编号中记录的block编号找到对应的block快,读取信息,这种文件系统成为索引式文件系统,block不宜太分散,碎片整理就是整理磁盘的block;EXT2就是索引式文件系统
### EXT2文件系统inode

